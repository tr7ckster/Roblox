local noClip = false
local debounce = false
local leftControl = false

game:GetService("UserInputService").InputBegan:Connect(function(k, IsTyping)
    if k.KeyCode == Enum.KeyCode.LeftControl and IsTyping == false then
        leftControl = true
    end
end)

game:GetService("UserInputService").InputEnded:Connect(function(k, IsTyping)
    if k.KeyCode == Enum.KeyCode.LeftControl and IsTyping == false then
        leftControl = false
    end
end)

function hasProperty(object, property)
    local Test = object[property]
end

local tweenService = game:GetService("TweenService")
local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Sine, Enum.EasingDirection.Out, 0, false)

function playTween(object, Properties)
   tweenService:Create(object, tweenInfo, Properties):Play()
end

function stateChange()
   if noClip == true then
       for i,v in pairs(game.Players.LocalPlayer.Character:GetChildren()) do
           if v:IsA("BasePart") then
               v.CanCollide = false
           end
       end
   else
       print("No")
   end
end

game:GetService("UserInputService").InputBegan:Connect(function(k, gameproccessed)
    if not gameproccessed then
        if k.KeyCode == Enum.KeyCode.N and leftControl == true then
            if debounce == false then
                debounce = true
                
                if noClip == false then
                    noClip = true
                    for i,v in pairs(game.Players.LocalPlayer.Character:GetDescendants()) do
                        local suc, err = pcall(function() hasProperty(v, "Transparency") end)
                       
                        if suc and v.Name ~= "HumanoidRootPart" then
                            local Properties = {Transparency = 0.35}
                            playTween(v, Properties)
                            
                           debounce = false
                        end
                    end
                elseif noClip == true then
                    noClip = false
                    for i,v in pairs(game.Players.LocalPlayer.Character:GetDescendants()) do
                        local suc, err = pcall(function() hasProperty(v, "Transparency") end)
                       
                        if suc and v.Name ~= "HumanoidRootPart" then
                            local Properties = {Transparency = 0}
                            playTween(v, Properties)
                            
                           debounce = false
                        end
                    end
                end
            end
        end
    end
end)

game:GetService("RunService").Stepped:Connect(function()
   coroutine.wrap(stateChange)()
end)
