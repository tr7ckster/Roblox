local fruitTable = {}

for i, FruitFound in pairs(game.Workspace:GetChildren()) do
   if table.find(Fruits, FruitFound.Name) then
      table.insert(fruitTable, FruitFound.Handle.Position)
   end
end

function webhookSend()

for i, Fruitpack in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do
   if Fruitpack.Name:match("Fruit") then
      local str = string.split(Fruitpack.Name, " ")
      
     msg = {
     ["embeds"] = {{
     ["color"] = 0000000,
     ["description"] = "description",
     ["author"] = {
     ["name"] = str.."-"..str.." Was Found"
     }}
   }
   
   local response = syn.request(
                                 {
                                   Url = webhook,
                                   Method = "POST",
                                   Headers = {
                                   ["Content-Type"] = "application/json"
                                   },
                                   Body = game:GetService("HttpService"):JSONEncode(msg)
                                 }
                )
}
   end
end

function storeFruit()
    for i, Fruitpack in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do
       if Fruitpack.Name:match("Fruit") then
          local str = string.split(Fruitpack.Name, " ")
       
          local ohString1 = "StoreFruit"
          local ohString2 = str[1].."-"..str[1]

          game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(ohString1, ohString2)   
       end
    end
end

CanTween = true

function serverHop()
  local sl = game.HttpService:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/".. game.PlaceId.. "/servers/Public?sortOrder=Asc&limit=100"))
     for i,v in pairs(sl.data) do
        if v.playing ~= v.maxPlayers then
            game:service'TeleportService':TeleportToPlaceInstance(game.PlaceId, v.id)
        end
    end
end

function tweenFruit(fruitPos)
   local TweenService = game:GetService("TweenService")

   local HRP = game.Players.LocalPlayer.Character.HumanoidRootPart

   local Distance = (HRP.Position - fruitPos).Magnitude
   local Time = Distance / 200
   
   local Info = TweenInfo.new(Time, Enum.EasingStyle.Sine, Enum.EasingDirection.Out, 0, false)
   local Properties = {
       CFrame = CFrame.new(fruitPos)
    }

   local Tween = TweenService:Create(HRP, Info, Properties)
   Tween:Play()
   
   Tween.Completed:Wait()
   
   CanTween = true
   
   wait(1)
  
   if Store == true then
       storeFruit()
   end
   
    coroutine.wrap(webhookSend)()
end

for i, getFruit in pairs(fruitTable) do
    if CanTween == true then
       tweenFruit(getFruit)
       CanTween = false
    end
end

if Repeat == true then
    wait(5)
   serverHop()
end
